# Документация функционального блока FB_SignalWithFeedback

## Обзор

### Назначение

Функциональный блок `FB_SignalWithFeedback` предназначен для контроля соответствия между командным сигналом и сигналом обратной связи. Блок наследуется от `FB_BasicSignal` и добавляет функциональность отслеживания получения подтверждения выполнения команды.

## Интерфейс функционального блока

### Входные параметры (VAR_INPUT)

|Параметр|Тип данных|Описание|
|---|---|---|
|`ixSignal`|`BOOL`|Командный сигнал (наследуется от FB_BasicSignal)|
|`ixFeedback`|`BOOL`|Сигнал обратной связи от исполнительного устройства|

### Внутренние переменные (VAR)

|Переменная|Тип данных|Описание|
|---|---|---|
|`_inputSignalTrigger`|`FB_SignalWithTrigger`|Детектор фронтов командного сигнала|
|`_xWaitingFeedback`|`BOOL`|Флаг ожидания сигнала обратной связи|
|`_xFeedbackReceived`|`BOOL`|Флаг успешного получения обратной связи|

## Принцип работы

1. При появлении переднего фронта командного сигнала устанавливается флаг ожидания обратной связи
2. При получении сигнала обратной связи во время ожидания устанавливается флаг успешного получения обратной связи
3. Флаг ожидания автоматически сбрасывается при получении обратной связи

## Методы

### GetReceivedFeedback

**Описание:** Возвращает состояние флага успешного получения обратной связи.

**Прототип:**

```pascal
METHOD GetReceivedFeedback : BOOL
```

**Возвращаемое значение:** 
- TRUE = обратная связь была получена
- FALSE = обратная связь не получена

---

### GetWaitingFeedback

**Описание:** Возвращает состояние флага ожидания сигнала обратной связи.

**Прототип:**

```pascal
METHOD GetWaitingFeedback : BOOL
```

**Возвращаемое значение:**
- TRUE = блок ожидает получения обратной связи
- FALSE = блок не ожидает обратной связи

---

### ResetReceivedFeedback

**Описание:** Сбрасывает флаг успешного получения обратной связи.

**Прототип:**

```pascal
METHOD ResetReceivedFeedback
```

**Функциональность:**
- Устанавливает `_xFeedbackReceived` = FALSE
- Не влияет на флаг ожидания

---

### ResetWaitingFeedback

**Описание:** Сбрасывает флаг ожидания сигнала обратной связи.

**Прототип:**

```pascal
METHOD ResetWaitingFeedback
```

**Функциональность:**
- Устанавливает `_xWaitingFeedback` = FALSE
- Прекращает ожидание обратной связи

---

### Наследуемые методы

Блок наследует все методы от `FB_BasicSignal`:

- `GetSignal() : BOOL` - получение текущего состояния командного сигнала
- `GetInvertedSignal() : BOOL` - получение инвертированного командного сигнала
